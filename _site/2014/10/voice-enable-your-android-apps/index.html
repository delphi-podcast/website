<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=8dce9d32f790087ba98d18ab087bc3f67f3d9fc2">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup theme-color -->
<!-- start theme color meta headers -->
<meta name="theme-color" content="#151515">
<meta name="msapplication-navbutton-color" content="#151515">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- end theme color meta headers -->


<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->


<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Voice Enable Your Android Apps | The Podcast at Delphi.org</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Voice Enable Your Android Apps" />
<meta name="author" content="Jim McKeeth" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="During CodeRage 9 I revisited adding voice support to Android apps. There are some updates from my previous skill sprint coverage on the topic and my original post on launching Google Glass apps via Voice." />
<meta property="og:description" content="During CodeRage 9 I revisited adding voice support to Android apps. There are some updates from my previous skill sprint coverage on the topic and my original post on launching Google Glass apps via Voice." />
<link rel="canonical" href="http://localhost:4000/2014/10/voice-enable-your-android-apps/" />
<meta property="og:url" content="http://localhost:4000/2014/10/voice-enable-your-android-apps/" />
<meta property="og:site_name" content="The Podcast at Delphi.org" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-10-28T17:06:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Voice Enable Your Android Apps" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jim McKeeth"},"dateModified":"2014-10-28T17:06:00-06:00","datePublished":"2014-10-28T17:06:00-06:00","description":"During CodeRage 9 I revisited adding voice support to Android apps. There are some updates from my previous skill sprint coverage on the topic and my original post on launching Google Glass apps via Voice.","headline":"Voice Enable Your Android Apps","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2014/10/voice-enable-your-android-apps/"},"url":"http://localhost:4000/2014/10/voice-enable-your-android-apps/"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <header>
      <div class="container">
        <a id="a-title" href="/">
          <h1>delphiorg.github.io</h1>
        </a>
        <h2>The Podcast about the Delphi programming language, tools, news and community.</h2>

        <section id="downloads">
          
          <a href="https://github.com/delphiorg/delphiorg.github.io" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <small>28 October 2014</small>
<h1>Voice Enable Your Android Apps</h1>

<p class="view">by Jim McKeeth</p>

<p>During CodeRage 9 I revisited adding voice support to Android apps. There are some updates from my previous <a title="Skill Sprint: Android Voice – Speech Recognition and TTS" href="http://delphi.org/2014/07/android-voice/">skill sprint coverage on the topic</a> and my original post on <a title="Launching a Delphi XE5 App via Voice on Google Glass" href="http://delphi.org/2014/01/launching-a-delphi-xe5-app-via-voice-on-google-glass/">launching Google Glass apps via Voice</a>.</p>

<p>You can download the <a href="https://github.com/jimmckeeth/FireMonkey-Android-Voice/">Samples and Components on GitHub</a>. It covers voice recognition, text to speech and launching apps on Google glass with your voice. The examples also cover Android Wear.</p>

<p><strong>Voice Launching Google Glass Apps</strong></p>
<ul>
	<li class="p1"><span class="s1">Add a Voice Trigger XML file:</span>
<ul>
	<li class="p2"><span class="s2">Choose a Standard Voice command <a href="http://embt.co/glass-voice-triggers"><span class="s3">http://embt.co/glass-voice-triggers</span></a></span></li>
	<li class="p2"><span class="s1">Deploy to </span><span class="s5">res\xml\</span><span class="s1"> folder.</span></li>
</ul>
</li>
	<li class="p1"><span class="s1">Modify the Android Manifest Template:</span>
<ul>
	<li class="p4"><span class="s1">Add an Intent Filter</span>
<ul>
	<li class="p5"><span class="s1">&lt;action android:name="com.google.android.glass.action.VOICE_TRIGGER"/&gt;</span></li>
</ul>
</li>
</ul>
</li>
	<li class="p6"><span class="s1">Add Meta Data for Filter</span>
<ul>
	<li class="p7"><span class="s1">&lt;meta-data android:name="com.google.android.glass.VoiceTrigger”
<span class="Apple-converted-space">       </span>android:resource="@xml/my_voice_trigger" /&gt;</span></li>
</ul>
</li>
</ul>
<p class="p1"><span class="s1"><b>Custom Glass Voice Trigger</b></span></p>

<ul>
	<li class="p1"><span class="s1">Change XML to from Command to Keyword.</span></li>
	<li class="p1"><span class="s1">Use arbitrary text for voice trigger.</span></li>
	<li class="p2"><span class="s1">Use the Development permission:</span>
<ul>
	<li class="p3"><span class="s1">&lt;uses-permission
android:name="com.google.android.glass.permission.DEVELOPMENT"/&gt;</span></li>
	<li class="p4"><span class="s1">Added to android manifest template</span></li>
</ul>
</li>
	<li class="p5"><span class="s1">Not allowed for app store distribution</span>
<ul>
	<li class="p6"><span class="s1">Usable for in-house or ad-hoc use</span></li>
</ul>
</li>
</ul>
<p class="p1"><span class="s1"><b>Additional Prompts on Google Glass</b></span></p>

<ul>
	<li class="p1"><span class="s1">Collect additional Voice recognition input when app is launched.</span>
<ul>
	<li class="p2"><span class="s1">Add an Input Prompt to the Voice Trigger XML</span>
<ul>
	<li class="p3"><span class="s1">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></li>
	<li class="p3"><span class="s1">&lt;trigger command="TAKE_A_NOTE"&gt;</span></li>
	<li class="p3"><span class="s1"><span class="Apple-converted-space">    </span>&lt;input prompt="What shall I say?" /&gt;</span></li>
	<li class="p4"><span class="s1">&lt;/trigger&gt;</span></li>
</ul>
</li>
</ul>
</li>
	<li class="p5"><span class="s1">In FormCreate get speech guesses from Intent Extras</span>
<ul>
	<li class="p6"><span class="s1">SharedActivity.getIntent.getExtras. getStringArrayList(TJRecognizerIntent.JavaClass.EXTRA_RESULTS);</span></li>
</ul>
</li>
</ul>
<p><strong>Voice Recognition on Android<img class="alignright size-full wp-image-1809" src="/assets/images/2014/10/Android-Speak-Now.png" alt="Android/Google - Speak Now" width="264" height="176" /></strong></p>
<ul>
	<li class="p1"><span class="s1">Prompts user for voice input</span></li>
	<li class="p1"><span class="s1">Returns up to 5 “guesses”</span></li>
	<li class="p2"><span class="s1">Works offline too </span>
<ul>
	<li class="p3"><span class="s1">(only returns 1 guess)</span></li>
</ul>
</li>
	<li class="p4"><span class="s1">Reusable component for download.</span></li>
	<li class="p4">Requires RECORD_AUDIO &amp; INTERNET permissions.</li>
	<li class="p4">Sends audio to Google’s servers.</li>
	<li class="p4">Uses context to select words.</li>
	<li class="p4">Pronounce punctuation (period, comma, etc.)</li>
	<li class="p4">Works on Android phones &amp; tablets</li>
	<li class="p4">Works on Google Glass</li>
	<li class="p4">Works on Android Wear</li>
	<li class="p4">Doesn’t work on iOS (no exposed API)
<ul>
	<li class="p4">Could use a 3rd party recognition service
<ul>
	<li class="p4">Ex: <a href="http://www.politepix.com/openears/">http://www.politepix.com/openears/</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Using TSpeechRecognition Component</strong></p>
<ul>
	<li class="p1"><span class="s1">Properties</span>
<ul>
	<li class="p1"><span class="s1">Language: en-US</span></li>
	<li class="p1"><span class="s1">Prompt: Speak now</span></li>
	<li class="p1"><span class="s1">AlwaysGuesses: True</span></li>
</ul>
</li>
	<li class="p1"><span class="s1">Methods</span>
<ul>
	<li class="p1"><span class="s1">Listen</span></li>
	<li class="p1"><span class="s1">ListenFor</span></li>
</ul>
</li>
	<li class="p1"><span class="s1">Events</span>
<ul>
	<li class="p1"><span class="s1">OnRecognition</span></li>
	<li class="p1"><span class="s1">OnRecognitionEx</span></li>
	<li class="p2"><span class="s1">OnCommand</span></li>
</ul>
</li>
</ul>
<p><strong>Text-To-Speech on Android</strong></p>
<ul>
	<li>Converts Text to spoken word.</li>
	<li>Reusable component based on Jeff Overcash’s translation.</li>
	<li>Code shows example of handling Java Listener events.</li>
	<li>Works on Android phones &amp; tablets</li>
	<li>Works on Google Glass</li>
	<li>Doesn’t work on Android Wear (no speaker)</li>
	<li>iOS Support is possible . . . . (needs implementation)</li>
</ul>
<p><strong>Using TAndroidTTS Component </strong>(component name may change)</p>
<ul>
	<li>Just one procedure: Speak</li>
</ul>
<p><strong>A Note About iOS</strong></p>
<ul>
	<li>iOS does not expose voice recognition API
<ul>
	<li>(Need to use 3rd party)</li>
</ul>
</li>
	<li>iOS 7 supports Text to Speech API
<ul>
	<li>AVSpeechSynthesizer</li>
	<li>Just haven’t implemented in component yet</li>
</ul>
</li>
</ul>
<p><strong>Google Glass Voice Trigger Sample</strong></p>
<ul>
	<li>C:\Users\Public\Documents\Embarcadero\Studio\15.0\Samples\
<ul>
	<li>\Object Pascal\Mobile Samples\Google Glass</li>
	<li>\CPP\Mobile Samples\Google Glass</li>
</ul>
</li>
	<li><a href="http://docwiki.embarcadero.com/CodeExamples/XE7/en/FMX.Mobile.GoogleGlass_Sample_(Delphi)">docwiki.embarcadero.com/CodeExamples/XE7/en/FMX.Mobile.GoogleGlass_Sample_(Delphi)</a></li>
</ul>
<p><em>The replay video will be available here later.</em></p>

<p><a href="https://downloads.embarcadero.com/free/delphi">Download the XE7 Trial</a> today and <a href="http://www.embarcadero.com/radoffer">check out the special offers</a>.</p>



  <small>tags: <em>Mobile</em> - <em>News</em></small>


      </section>
    </div>
  </body>
</html>
