<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=8dce9d32f790087ba98d18ab087bc3f67f3d9fc2">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup theme-color -->
<!-- start theme color meta headers -->
<meta name="theme-color" content="#151515">
<meta name="msapplication-navbutton-color" content="#151515">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- end theme color meta headers -->


<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->


<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Android JNI Bridge and Custom Classes.dex | The Podcast at Delphi.org</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Android JNI Bridge and Custom Classes.dex" />
<meta name="author" content="Jim McKeeth" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="By creating a custom Classes.dex you can get access to 3rd party Java JAR APIs from your application. For my Integrate More Android with a JNI Call to your Android App Developer Skill Sprint I created a demo app that demonstrates creating a custom Classes.dex. This is a new feature in XE6 and Appmethod 1.14. [Download the demo] [Download the slides] The Demo app uses the Base64Coder JAR file (included). To build the demo: Examine the createdex.bat file to make sure it refers to the correct location for your dx.bat utility and the fmx.jar &amp; android-support-v4.jar files. Run the createdex.bat file to create the classes.dex file which includes the two jar files above, plus the base64coder.jar file. Double check that the Deployment Manager references the new classes.dex and not the old ones, and that the remote path is &quot;classes\&quot; Notice that the android.JNI.Base64Coder.pas file wraps and exposes the methods of the base64coder class. Run the app on your Android device and verify that it works as expected. The Base64Coder.JAR is Android specific, so it will not work on iOS or Windows. Some additional notes from the Developer Skill Sprint: Some useful units for making JNI calls Androidapi.Jni – Java Native Interface type definitions Androidapi.JNIBridge – The JNI Bridge Androidapi.JNI.JavaTypes – JString and other common types. Androidapi.Helpers – JStringToString and other useful conversions. FMX.Platform.Android– Useful platform methods like GetAndroidApp, MainActivity and ConvertPointToPixel Others useful units: Androidapi.AppGlue, Androidapi.JNIMarshal, Androidapi.JNI.Embarcadero For more see: C:\Program Files (x86)\Embarcadero\Studio\14.0\source\rtl\android (Object Pascal) and C:\Program Files (x86)\Embarcadero\Studio\14.0\include\android\rtl (C++) You will want to make use of Conditional Defines in Object Pascal and Predefined Macros in C++. In my blog post on Android Settings I showed how to make a JNI call with Object Pascal, but you can also look at the DeviceInfo Mobile Code Snippet in both C++ and Object Pascal. To create your own JNI Bridge wrappers, look at the source code in C:\Program Files (x86)\Embarcadero\Studio\14.0\source\rtl\android (Object Pascal) and C:\Program Files (x86)\Embarcadero\Studio\14.0\include\android\rtl (C++). You can also consider the following 3rd party utilities: Java2Pas by Software Union JavaImport by WinSoft Android2DelphiImport by CHUA Chee Wee aka “Chewy” (also an Embarcadero MVP) [my previous review] If you just want to include standard Android APIs then check out the FMXExpress (also an Embarcadero MVP) project on GitHub that includes all the Android APIs. Here is the video replay of my skill sprint" />
<meta property="og:description" content="By creating a custom Classes.dex you can get access to 3rd party Java JAR APIs from your application. For my Integrate More Android with a JNI Call to your Android App Developer Skill Sprint I created a demo app that demonstrates creating a custom Classes.dex. This is a new feature in XE6 and Appmethod 1.14. [Download the demo] [Download the slides] The Demo app uses the Base64Coder JAR file (included). To build the demo: Examine the createdex.bat file to make sure it refers to the correct location for your dx.bat utility and the fmx.jar &amp; android-support-v4.jar files. Run the createdex.bat file to create the classes.dex file which includes the two jar files above, plus the base64coder.jar file. Double check that the Deployment Manager references the new classes.dex and not the old ones, and that the remote path is &quot;classes\&quot; Notice that the android.JNI.Base64Coder.pas file wraps and exposes the methods of the base64coder class. Run the app on your Android device and verify that it works as expected. The Base64Coder.JAR is Android specific, so it will not work on iOS or Windows. Some additional notes from the Developer Skill Sprint: Some useful units for making JNI calls Androidapi.Jni – Java Native Interface type definitions Androidapi.JNIBridge – The JNI Bridge Androidapi.JNI.JavaTypes – JString and other common types. Androidapi.Helpers – JStringToString and other useful conversions. FMX.Platform.Android– Useful platform methods like GetAndroidApp, MainActivity and ConvertPointToPixel Others useful units: Androidapi.AppGlue, Androidapi.JNIMarshal, Androidapi.JNI.Embarcadero For more see: C:\Program Files (x86)\Embarcadero\Studio\14.0\source\rtl\android (Object Pascal) and C:\Program Files (x86)\Embarcadero\Studio\14.0\include\android\rtl (C++) You will want to make use of Conditional Defines in Object Pascal and Predefined Macros in C++. In my blog post on Android Settings I showed how to make a JNI call with Object Pascal, but you can also look at the DeviceInfo Mobile Code Snippet in both C++ and Object Pascal. To create your own JNI Bridge wrappers, look at the source code in C:\Program Files (x86)\Embarcadero\Studio\14.0\source\rtl\android (Object Pascal) and C:\Program Files (x86)\Embarcadero\Studio\14.0\include\android\rtl (C++). You can also consider the following 3rd party utilities: Java2Pas by Software Union JavaImport by WinSoft Android2DelphiImport by CHUA Chee Wee aka “Chewy” (also an Embarcadero MVP) [my previous review] If you just want to include standard Android APIs then check out the FMXExpress (also an Embarcadero MVP) project on GitHub that includes all the Android APIs. Here is the video replay of my skill sprint" />
<link rel="canonical" href="http://localhost:4000/2014/07/custom-classes-dex/" />
<meta property="og:url" content="http://localhost:4000/2014/07/custom-classes-dex/" />
<meta property="og:site_name" content="The Podcast at Delphi.org" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-07-08T00:34:22-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Android JNI Bridge and Custom Classes.dex" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jim McKeeth"},"dateModified":"2014-07-08T00:34:22-06:00","datePublished":"2014-07-08T00:34:22-06:00","description":"By creating a custom Classes.dex you can get access to 3rd party Java JAR APIs from your application. For my Integrate More Android with a JNI Call to your Android App Developer Skill Sprint I created a demo app that demonstrates creating a custom Classes.dex. This is a new feature in XE6 and Appmethod 1.14. [Download the demo] [Download the slides] The Demo app uses the Base64Coder JAR file (included). To build the demo: Examine the createdex.bat file to make sure it refers to the correct location for your dx.bat utility and the fmx.jar &amp; android-support-v4.jar files. Run the createdex.bat file to create the classes.dex file which includes the two jar files above, plus the base64coder.jar file. Double check that the Deployment Manager references the new classes.dex and not the old ones, and that the remote path is &quot;classes\\&quot; Notice that the android.JNI.Base64Coder.pas file wraps and exposes the methods of the base64coder class. Run the app on your Android device and verify that it works as expected. The Base64Coder.JAR is Android specific, so it will not work on iOS or Windows. Some additional notes from the Developer Skill Sprint: Some useful units for making JNI calls Androidapi.Jni – Java Native Interface type definitions Androidapi.JNIBridge – The JNI Bridge Androidapi.JNI.JavaTypes – JString and other common types. Androidapi.Helpers – JStringToString and other useful conversions. FMX.Platform.Android– Useful platform methods like GetAndroidApp, MainActivity and ConvertPointToPixel Others useful units: Androidapi.AppGlue, Androidapi.JNIMarshal, Androidapi.JNI.Embarcadero For more see: C:\\Program Files (x86)\\Embarcadero\\Studio\\14.0\\source\\rtl\\android (Object Pascal) and C:\\Program Files (x86)\\Embarcadero\\Studio\\14.0\\include\\android\\rtl (C++) You will want to make use of Conditional Defines in Object Pascal and Predefined Macros in C++. In my blog post on Android Settings I showed how to make a JNI call with Object Pascal, but you can also look at the DeviceInfo Mobile Code Snippet in both C++ and Object Pascal. To create your own JNI Bridge wrappers, look at the source code in C:\\Program Files (x86)\\Embarcadero\\Studio\\14.0\\source\\rtl\\android (Object Pascal) and C:\\Program Files (x86)\\Embarcadero\\Studio\\14.0\\include\\android\\rtl (C++). You can also consider the following 3rd party utilities: Java2Pas by Software Union JavaImport by WinSoft Android2DelphiImport by CHUA Chee Wee aka “Chewy” (also an Embarcadero MVP) [my previous review] If you just want to include standard Android APIs then check out the FMXExpress (also an Embarcadero MVP) project on GitHub that includes all the Android APIs. Here is the video replay of my skill sprint","headline":"Android JNI Bridge and Custom Classes.dex","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2014/07/custom-classes-dex/"},"url":"http://localhost:4000/2014/07/custom-classes-dex/"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <header>
      <div class="container">
        <a id="a-title" href="/">
          <h1>delphiorg.github.io</h1>
        </a>
        <h2>The Podcast about the Delphi programming language, tools, news and community.</h2>

        <section id="downloads">
          
          <a href="https://github.com/delphiorg/delphiorg.github.io" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <small>8 July 2014</small>
<h1>Android JNI Bridge and Custom Classes.dex</h1>

<p class="view">by Jim McKeeth</p>

<p>By creating a <a href="http://embt.co/xe6classesdex">custom Classes.dex</a> you can get access to 3rd party Java JAR APIs from your application. For my <a href="http://www.embarcadero.com/landing-pages/skill-sprints"><strong>Integrate More Android with a JNI Call to your Android App</strong> Developer Skill Sprint</a> I created a demo app that demonstrates creating a custom Classes.dex. This is a new feature in XE6 and Appmethod 1.14. [<a href="http://cc.embarcadero.com/item/29900">Download the demo</a>] [<a href="http://cc.embarcadero.com/item/29901">Download the slides</a>] The Demo app uses the <a href="http://www.source-code.biz/base64coder/java/">Base64Coder JAR file</a> (included). To build the demo:</p>
<ol>
	<li>Examine the <strong>createdex.bat</strong> file to make sure it refers to the correct location for your dx.bat utility and the fmx.jar &amp; android-support-v4.jar files.</li>
	<li>Run the createdex.bat file to create the <strong>classes.dex</strong> file which includes the two jar files above, plus the base64coder.jar file.</li>
	<li>Double check that the <a href="http://docwiki.embarcadero.com/RADStudio/XE6/en/Deployment_Manager">Deployment Manager</a> references the new classes.dex and not the old ones, and that the remote path is "classes\"</li>
	<li>Notice that the <strong>android.JNI.Base64Coder.pas</strong> file wraps and exposes the methods of the <a href="http://www.source-code.biz/base64coder/java/apidocs/biz/source_code/base64Coder/Base64Coder.html">base64coder class</a>.</li>
	<li>Run the app on your Android device and verify that it works as expected.</li>
</ol>
<p>The Base64Coder.JAR is Android specific, so it will not work on iOS or Windows. Some additional notes from the Developer Skill Sprint: Some useful units for making JNI calls</p>
<ul>
	<li>Androidapi.Jni – Java Native Interface type definitions</li>
	<li>Androidapi.JNIBridge – The JNI Bridge</li>
	<li>Androidapi.JNI.JavaTypes – JString and other common types.</li>
	<li>Androidapi.Helpers – JStringToString and other useful conversions.</li>
	<li>FMX.Platform.Android– Useful platform methods like GetAndroidApp, MainActivity and ConvertPointToPixel</li>
	<li>Others useful units: Androidapi.AppGlue, Androidapi.JNIMarshal, Androidapi.JNI.Embarcadero</li>
	<li>For more see: C:\Program Files (x86)\Embarcadero\Studio\14.0\source\rtl\android (Object Pascal) and C:\Program Files (x86)\Embarcadero\Studio\14.0\include\android\rtl (C++)</li>
</ul>
<p>You will want to make use of <a href="http://docwiki.embarcadero.com/RADStudio/XE6/en/Conditional_compilation_(Delphi)">Conditional Defines in Object Pascal</a> and <a href="http://docwiki.embarcadero.com/RADStudio/XE6/en/Predefined_Macros">Predefined Macros in C++</a>. In my blog post on <a title="Setting Android Settings" href="http://delphi.org/2014/03/setting-android-settings/">Android Settings</a> I showed how to make a JNI call with Object Pascal, but you can also look at the DeviceInfo Mobile Code Snippet in both C++ and Object Pascal. To create your own JNI Bridge wrappers, look at the source code in C:\Program Files (x86)\Embarcadero\Studio\14.0\source\rtl\android (Object Pascal) and C:\Program Files (x86)\Embarcadero\Studio\14.0\include\android\rtl (C++). You can also consider the following 3rd party utilities:</p>
<ul>
	<li><a href="http://www.softwareunion.lu/en/downloads/">Java2Pas by Software Union</a></li>
	<li><a href="http://www.winsoft.sk/jimport.htm">JavaImport by WinSoft</a></li>
	<li><a href="http://journeyman.ath.cx/">Android2DelphiImport by CHUA Chee Wee aka “Chewy”</a> (also an Embarcadero MVP) [<a title="Every Android API for Delphi" href="http://delphi.org/2014/01/every-android-api-for-delphi/">my previous review</a>]</li>
</ul>
<p>If you just want to include standard Android APIs then check out the <a href="http://www.fmxexpress.com/">FMXExpress</a> (also an Embarcadero MVP) project on GitHub that <a href="https://github.com/FMXExpress/android-object-pascal-wrapper/">includes all the Android APIs</a>. Here is the video replay of my skill sprint</p>

<p>http://www.youtube.com/watch?v=TyzE0T6zOyE</p>

<p>Also, check out Brian Long’s video on accessing the Android API with XE5</p>

<p>http://www.youtube.com/watch?v=GcuYc7F0lIU</p>



  <small>tags: <em>Mobile</em> - <em>MVP</em> - <em>News</em> - <em>Source Code</em> - <em>webinar</em></small>


      </section>
    </div>
  </body>
</html>
