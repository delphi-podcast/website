<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=8dce9d32f790087ba98d18ab087bc3f67f3d9fc2">
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup theme-color -->
<!-- start theme color meta headers -->
<meta name="theme-color" content="#151515">
<meta name="msapplication-navbutton-color" content="#151515">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- end theme color meta headers -->


<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->


<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Sending a URL to Another App on Android and iOS with Delphi XE5 | The Podcast at Delphi.org</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Sending a URL to Another App on Android and iOS with Delphi XE5" />
<meta name="author" content="Jim McKeeth" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Here is the source code for my Open and View URL library from my CodeRage 8 session “Beyond the App”. Here is a download of the example app. I’ll see about posting it to a SVN repository too so it can grow and evolve. Thanks to Al Mannarino for his code that started this!" />
<meta property="og:description" content="Here is the source code for my Open and View URL library from my CodeRage 8 session “Beyond the App”. Here is a download of the example app. I’ll see about posting it to a SVN repository too so it can grow and evolve. Thanks to Al Mannarino for his code that started this!" />
<link rel="canonical" href="http://localhost:4000/2013/10/sending-a-url-to-another-app-on-android-and-ios-with-delphi-xe5/" />
<meta property="og:url" content="http://localhost:4000/2013/10/sending-a-url-to-another-app-on-android-and-ios-with-delphi-xe5/" />
<meta property="og:site_name" content="The Podcast at Delphi.org" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-10-15T13:32:44-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Sending a URL to Another App on Android and iOS with Delphi XE5" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jim McKeeth"},"dateModified":"2013-10-15T13:32:44-06:00","datePublished":"2013-10-15T13:32:44-06:00","description":"Here is the source code for my Open and View URL library from my CodeRage 8 session “Beyond the App”. Here is a download of the example app. I’ll see about posting it to a SVN repository too so it can grow and evolve. Thanks to Al Mannarino for his code that started this!","headline":"Sending a URL to Another App on Android and iOS with Delphi XE5","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2013/10/sending-a-url-to-another-app-on-android-and-ios-with-delphi-xe5/"},"url":"http://localhost:4000/2013/10/sending-a-url-to-another-app-on-android-and-ios-with-delphi-xe5/"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <header>
      <div class="container">
        <a id="a-title" href="/">
          <h1>delphiorg.github.io</h1>
        </a>
        <h2>The Podcast about the Delphi programming language, tools, news and community.</h2>

        <section id="downloads">
          
          <a href="https://github.com/delphiorg/delphiorg.github.io" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <small>15 October 2013</small>
<h1>Sending a URL to Another App on Android and iOS with Delphi XE5</h1>

<p class="view">by Jim McKeeth</p>

<p>Here is the source code for my Open and View URL library from my <a href="www.embarcadero.com/coderage">CodeRage 8</a> session “Beyond the App”. Here is a download of the <a href="http://delphi.org/downloads/SendURL.7z">example app</a>. I’ll see about posting it to a SVN repository too so it can grow and evolve. Thanks to Al Mannarino for his code that started this!</p>

<p><strong>Note</strong> the code is using <em>TidURL.URLEncode on all URLs</em>. I found it is only required on the maps for iOS (iOS doesn’t like spaces) but may be causing trouble with the geo:// on Android.</p>

<p><strong>Some example protocols</strong></p>
<ul>
	<li>http, tel, sms, fb, mailto, twitter, geo, <em>etc.</em></li>
</ul>
<p><strong>Example URLs</strong></p>
<ul>
	<li><strong><em>- Common to both iOS &amp; Android -</em></strong></li>
	<li>http://www.embarcadero.com/</li>
	<li>tel://(415)834-3131</li>
	<li>sms://1234</li>
	<li>http://twitter.com/coderage<em> (This opens with the Twitter client on Android)</em></li>
	<li>mailto://jim.mckeeth@embarcadero.com</li>
	<li>twitter://user?screen_name=coderage</li>
	<li>fb://profile/34960937498 <em>(get the UID from <a href="http://graph.facebook.com/embarcaderotech">http://graph.facebook.com/embarcaderotech</a> or for whatever page you are looking for)</em></li>
	<li><strong><em>- iOS Specific -</em></strong></li>
	<li>http://maps.apple.com?q=5617 Scotts Valley Drive, Scotts Valley, CA 95066<em> (this needs the URL encode - Apple has some additional APIs that are recommended.)</em></li>
	<li><strong><span style="line-height: 22px;">- Android Only -</span></strong></li>
	<li>content://contacts/people/</li>
	<li>content://contacts/people/1</li>
	<li>geo://0,0?q=5617 Scotts Valley Drive, Scotts Valley, CA 95066</li>
	<li>geo://46.191200, -122.194400 (I think this one doesn't like the URLEncode)</li>
</ul>

<p>[delphi]unit OpenViewUrl;</p>

<p>interface</p>

<p>// URLEncode is performed on the URL
// so you need to format it   protocol://path
function OpenURL(const URL: string; const DisplayError: Boolean = False): Boolean;</p>

<p>implementation</p>

<p>uses
  IdURI, SysUtils, Classes, FMX.Dialogs,
{$IFDEF ANDROID}
  Androidapi.Helpers,
  FMX.Helpers.Android, Androidapi.JNI.GraphicsContentViewText,
  Androidapi.JNI.Net, Androidapi.JNI.JavaTypes;
{$ELSE}
{$IFDEF IOS}
  Macapi.Helpers, iOSapi.Foundation, FMX.Helpers.iOS;
{$ENDIF IOS}
{$ENDIF ANDROID}</p>

<p>function OpenURL(const URL: string; const DisplayError: Boolean = False): Boolean;
{$IFDEF ANDROID}
var
  Intent: JIntent;
begin
// There may be an issue with the geo: prefix and URLEncode.
// will need to research
  Intent := TJIntent.JavaClass.init(TJIntent.JavaClass.ACTION_VIEW,
    TJnet_Uri.JavaClass.parse(StringToJString(TIdURI.URLEncode(URL))));
  try
    SharedActivity.startActivity(Intent);
    exit(true);
  except
    on e: Exception do
    begin
      if DisplayError then ShowMessage(‘Error: ‘ + e.Message);
      exit(false);
    end;
  end;
end;
{$ELSE}
{$IFDEF IOS}
var
  NSU: NSUrl;
begin
  // iOS doesn’t like spaces, so URL encode is important.
  NSU := StrToNSUrl(TIdURI.URLEncode(URL));
  if SharedApplication.canOpenURL(NSU) then
    exit(SharedApplication.openUrl(NSU))
  else
  begin
    if DisplayError then
      ShowMessage(‘Error: Opening "’ + URL + ‘" not supported.’);
    exit(false);
  end;
end;
{$ELSE}
begin
  raise Exception.Create(‘Not supported!’);
end;
{$ENDIF IOS}
{$ENDIF ANDROID}</p>

<p>end.[/delphi]</p>




  <small>tags: <em>Conferences</em> - <em>iOS</em> - <em>Mobile</em></small>


      </section>
    </div>
  </body>
</html>
